document.addEventListener("DOMContentLoaded", function() {
    const exploitForm = document.getElementById("exploitForm");
    const resultDiv = document.getElementById("result");

    exploitForm.addEventListener("submit", function(event) {
        event.preventDefault();
        resultDiv.innerHTML = "";

        const ipAddress = document.getElementById("ipAddress").value;
        const port = document.getElementById("port").value;
        const gifName = document.getElementById("gifName").value;

        fetch("/run-exploit", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ ipAddress, port, gifName })
        })
        .then(response => response.text())
        .then(message => {
            resultDiv.innerHTML = message;
        })
        .catch(error => {
            console.error(error);
            resultDiv.textContent = "Une erreur s'est produite lors de la soumission du formulaire.";
        });
    });
});